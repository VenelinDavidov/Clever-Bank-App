<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Edit Loan - Clever Bank</title>
    <link rel="stylesheet" type="text/css" href="/css/loans.css">
    <link rel="stylesheet" type="text/css" href="/css/nav-side-bar.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
<div class="nav-bar">
    <div class="side-bar-container">
        <nav>
            <div class="side_navbar">
                <div class="clever-bank-nav-bar">
                    <div class="clever-bank-nav-bar-name">Clever Bank</div>
                </div>
                <div class="func-block">
                    <a href="/home">
                        <p>Dashboard</p>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                             xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-width="2"
                                  d="M5 7h14M5 12h14M5 17h14"></path>
                        </svg>
                    </a>
                    <a class="active special-gold" href="/loans">
                        <p>Loans</p>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                             xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                             viewBox="0 0 24 24">
                            <path fill-rule="evenodd"
                                  d="M12 2c-.791 0-1.55.314-2.11.874l-.893.893a.985.985 0 0 1-.696.288H7.04A2.984 2.984 0 0 0 4.055 7.04v1.262a.986.986 0 0 1-.288.696l-.893.893a2.984 2.984 0 0 0 0 4.22l.893.893a.985.985 0 0 1 .288.696v1.262a2.984 2.984 0 0 0 2.984 2.984h1.262c.261 0 .512.104.696.288l.893.893a2.984 2.984 0 0 0 4.22 0l.893-.893a.985.985 0 0 1 .696-.288h1.262a2.984 2.984 0 0 0 2.984-2.984V15.7c0-.261.104-.512.288-.696l.893-.893a2.984 2.984 0 0 0 0-4.22l-.893-.893a.985.985 0 0 1-.288-.696V7.04a2.984 2.984 0 0 0-2.984-2.984h-1.262a.985.985 0 0 1-.696-.288l-.893-.893A2.984 2.984 0 0 0 12 2Zm3.683 7.73a1 1 0 1 0-1.414-1.413l-4.253 4.253-1.277-1.277a1 1 0 0 0-1.415 1.414l1.985 1.984a1 1 0 0 0 1.414 0l4.96-4.96Z"
                                  clip-rule="evenodd"></path>
                        </svg>
                    </a>
                </div>
                <div class="func-block">
                    <span>Quick Link</span>
                    <a href="/transfers">
                        <p>Transfers</p>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                             xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="m16 10 3-3m0 0-3-3m3 3H5v3m3 4-3 3m0 0 3 3m-3-3h14v-3"></path>
                        </svg>
                    </a>
                    <a href="/pockets">
                        <p>Pocket</p>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                             xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                             viewBox="0 0 24 24">
                            <path fill-rule="evenodd"
                                  d="M12 14a3 3 0 0 1 3-3h4a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-4a3 3 0 0 1-3-3Zm3-1a1 1 0 1 0 0 2h4v-2h-4Z"
                                  clip-rule="evenodd"></path>
                            <path fill-rule="evenodd"
                                  d="M12.293 3.293a1 1 0 0 1 1.414 0L16.414 6h-2.828l-1.293-1.293a1 1 0 0 1 0-1.414ZM12.414 6 9.707 3.293a1 1 0 0 0-1.414 0L5.586 6h6.828ZM4.586 7l-.056.055A2 2 0 0 0 3 9v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2h-4a5 5 0 0 1 0-10h4a2 2 0 0 0-1.53-1.945L17.414 7H4.586Z"
                                  clip-rule="evenodd"></path>
                        </svg>
                    </a>
                    <a href="/bills">
                        <p>Bills</p>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                             xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                             viewBox="0 0 24 24">
                            <path fill-rule="evenodd"
                                  d="M9 2.221V7H4.221a2 2 0 0 1 .365-.5L8.5 2.586A2 2 0 0 1 9 2.221ZM11 2v5a2 2 0 0 1-2 2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2 2 2 0 0 0 2 2h12a2 2 0 0 0 2-2 2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2V4a2 2 0 0 0-2-2h-5Zm-6 9a1 1 0 0 0-1 1v5a1 1 0 1 0 2 0v-1h.5a2.5 2.5 0 0 0 0-5H5Zm1.5 3H6v-1h.5a.5.5 0 0 1 0 1Zm4.5-3a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h1.376A2.626 2.626 0 0 0 15 15.375v-1.75A2.626 2.626 0 0 0 12.375 11H11Zm1 5v-3h.375a.626.626 0 0 1 .625.625v1.75a.626.626 0 0 1-.626.625H12Zm5-5a1 1 0 0 0-1 1v5a1 1 0 1 0 2 0v-1h1a1 1 0 1 0 0-2h-1v-1h1a1 1 0 1 0 0-2h-2Z"
                                  clip-rule="evenodd"></path>
                        </svg>
                    </a>
                    <a href="/transactions">
                        <p>Transactions</p>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                             xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M8 20V7m0 13-4-4m4 4 4-4m4-12v13m0-13 4 4m-4-4-4 4"></path>
                        </svg>
                    </a>
                    <a href="/cards">
                        <p>Cards</p>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                             xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                             viewBox="0 0 24 24">
                            <path fill-rule="evenodd"
                                  d="M4 4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H4Zm16 7H4v7h16v-7ZM6 14a1 1 0 0 1 1-1h2a1 1 0 1 1 0 2H7a1 1 0 0 1-1-1Zm5 0a1 1 0 0 1 1-1h6a1 1 0 1 1 0 2h-6a1 1 0 0 1-1-1Z"
                                  clip-rule="evenodd"></path>
                        </svg>
                    </a>
                    <a href="/notices">
                        <p>Notices</p>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                             xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                             viewBox="0 0 24 24">
                            <path d="M17.133 12.632v-1.8a5.406 5.406 0 0 0-4.154-5.262.955.955 0 0 0 .021-.106V3.1a1 1 0 0 0-2 0v2.364a.955.955 0 0 0 .021.106 5.406 5.406 0 0 0-4.154 5.262v1.8C6.867 15.018 5 15.614 5 16.807 5 17.4 5 18 5.538 18h12.924C19 18 19 17.4 19 16.807c0-1.193-1.867-1.789-1.867-4.175ZM8.823 19a3.453 3.453 0 0 0 6.354 0H8.823Z"></path>
                        </svg>
                    </a>
                </div>
                <div class="func-block">
                    <span>Utility</span>
                    <a href="/subscriptions/history">
                        <p> History</p>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                             xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-width="2"
                                  d="M12 6h.01M12 12h.01M12 18h.01"></path>
                        </svg>
                    </a>
                </div>
                <div class="func-block admin-func-block">
                    <span>Admin</span>
                    <a href="/customers">
                        <p>Customer</p>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                             xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-width="2"
                                  d="M12 6h.01M12 12h.01M12 18h.01"></path>
                        </svg>
                    </a>
                </div>
                <div class="func-block">
                    <a class="logout" href="/logout">
                        <p>Logout</p>
                        <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true"
                             xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                  d="M20 12H8m12 0-4 4m4-4-4-4M9 4H7a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h2"></path>
                        </svg>
                    </a>
                </div>
            </div>
        </nav>
    </div>
</div>

<main class="loans-main-content">
    <div class="loans-container">
        <!-- Header Section -->
        <div class="loans-header">
            <div class="header-content">
                <h1 class="page-title">Edit Loan Application</h1>
                <p class="page-subtitle">Update your loan application details</p>
            </div>
        </div>

        <!-- Loan Info Card -->
        <div class="loan-form-card" style="margin-bottom: 1.5rem;">
            <div class="loan-info-display">
                <div class="info-row">
                    <span class="info-label">Loan ID:</span>
                    <span class="info-value" th:text="${loan.loanId}"></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Status:</span>
                    <span class="loan-status"
                          th:classappend="${loan.loanStatus == 'APPROVED' ? 'status-approved' :
                                         loan.loanStatus == 'PENDING' ? 'status-pending' :
                                         loan.loanStatus == 'REJECTED' ? 'status-rejected' :
                                         loan.loanStatus == 'ACTIVE' ? 'status-active' : 'status-default'}"
                          th:text="${loan.loanStatus}"></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Applied On:</span>
                    <span class="info-value" th:text="${#temporals.format(loan.createdOn, 'MMMM dd, yyyy HH:mm')}"></span>
                </div>
            </div>
        </div>

        <!-- Edit Form Card -->
        <div class="loan-form-card">
            <div class="card-header">
                <h2 class="card-title">Update Loan Details</h2>
                <p class="card-description">Modify the loan information below</p>
            </div>

            <form th:action="@{/loans/update/{loanId}(loanId=${loan.loanId})}"
                  th:object="${loanRequest}"
                  method="post"
                  class="loan-form">

                <div class="form-grid">
                    <div class="form-group">
                        <label for="loanType" class="form-label">Loan Type</label>
                        <select th:field="*{loanType}" id="loanType" class="form-select" required>
                            <option value="">Select loan type</option>
                            <option value="PERSONAL">Personal Loan (8.5% APR, 3 years)</option>
                            <option value="MORTGAGE">Mortgage (3.5% APR, 30 years)</option>
                            <option value="BUSINESS">Business Loan (6.5% APR, 5 years)</option>
                            <option value="STUDENT">Student Loan (4.5% APR, 10 years)</option>
                            <option value="CREDIT-CARD">Credit Card (18.5% APR, 1 year)</option>
                            <option value="AUTO">Auto Loan (5.5% APR, 5 years)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="amount" class="form-label">Loan Amount (USD)</label>
                        <input type="number" th:field="*{amount}" id="amount"
                               class="form-input" placeholder="10000"
                               min="100" step="100" required/>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19l12-12-1.41-1.41L9 16.17z"/>
                        </svg>
                        Update Loan
                    </button>
                    <a href="/loans" class="btn btn-secondary" style="text-decoration: none;">Cancel</a>
                </div>
            </form>
        </div>

        <!-- Current Loan Details -->
        <div class="loan-form-card">
            <div class="card-header">
                <h2 class="card-title">Current Loan Calculation</h2>
                <p class="card-description">Based on your current loan details</p>
            </div>

            <div class="loan-details-grid" style="grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));">
                <div class="detail-item">
                    <span class="detail-label">Interest Rate</span>
                    <span class="detail-value" th:text="${loan.interestRate} + '%'">8.5%</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Monthly Payment</span>
                    <span class="detail-value" th:text="'$' + ${#numbers.formatDecimal(loan.monthlyPayment, 1, 2)}">$315.00</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Term Length</span>
                    <span class="detail-value" th:text="${loan.termMonths} + ' months'">36 months</span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Total Amount</span>
                    <span class="detail-value" th:text="'$' + ${#numbers.formatDecimal(loan.monthlyPayment * loan.termMonths, 1, 2)}">$11,340.00</span>
                </div>
            </div>
        </div>
    </div>
</main>

<style>
    .loan-info-display {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .info-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem;
        background: #f7fafc;
        border-radius: 8px;
    }

    .info-label {
        font-weight: 600;
        color: #4a5568;
    }

    .info-value {
        font-weight: 500;
        color: #2d3748;
    }
</style>

<th:block th:insert="~{fragments/footer :: footer}"></th:block>
</body>
</html>
